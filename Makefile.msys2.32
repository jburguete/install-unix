MAKE = pacman -S
BASE = /usr/bin/
BASE2 = /mingw32/bin/
MINGW = mingw32/mingw-w64-i686-
utils = $(BASE)patch.exe
compilers = $(BASE2)gfortran.exe
repositories = $(BASE)svn.exe
libraries = $(BASE2)glew32.dll
edit = $(BASE)vim.exe
debug = $(BASE2)gdb.exe
diff = $(BASE2)meld
pdf = $(BASE2)evince.exe
doxygen = $(BASE)doxygen.exe
browser = $(BASE)wget.exe
graphics = $(BASE2)ufraw.exe
fontsver = 20120503
fontsname = freefont
fontsurl = https://ftp.gnu.org/gnu/freefont/$(fontsname)-ttf-$(fontsver)
fontsdir = /usr/share/fonts/truetype/
fonts = $(fontsdir)FreeSans.ttf

all: \
	$(utils) \
	$(compilers) \
	$(repositories) \
	$(libraries) \
	$(edit) \
	$(debug) \
	$(diff) \
	$(pdf) \
	$(doxygen) \
	$(browser) \
	$(graphics) \
	$(fonts)

$(utils):
	$(MAKE) zip xz tar unzip patch

$(compilers):
	$(MAKE) autoconf automake make $(MINGW)gcc $(MINGW)gcc-fortran pkg-config

$(repositories):
	$(MAKE) git subversion

$(libraries):
	$(MAKE) $(MINGW)libxml2 $(MINGW)glib2 $(MINGW)json-glib $(MINGW)sqlite3 \
		$(MINGW)gsl $(MINGW)gettext $(MINGW)gtk3 $(MINGW)freeglut \
		$(MINGW)glew

$(edit):
	$(MAKE) vim

$(debug):
	$(MAKE) $(MINGW)gdb

$(diff):
	$(MAKE) $(MINGW)meld3

$(pdf):
	$(MAKE) $(MINGW)evince

$(doxygen):
	$(MAKE) doxygen

$(browser):
	$(MAKE) wget

$(graphics):
	$(MAKE) $(MINGW)imagemagick $(MINGW)gimp $(MINGW)gimp-ufraw

$(fonts):
	wget $(fontsurl).zip
	unzip $(fontsname)-ttf-$(fontsver).zip
	cd $(fontsname)-$(fontsver); \
	test -d $(fontsdir) || mkdir -p $(fontsdir); \
	mv *.ttf $(fontsdir)

update:
	pacman -Syu

clean:
	pacman -Sc
